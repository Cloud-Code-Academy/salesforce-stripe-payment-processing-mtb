# Lambda Environment Variables Template
# These values are managed by AWS SAM template and Secrets Manager
# This file is for reference only - actual values are set during deployment

# ==========================================
# ENVIRONMENT
# ==========================================
ENVIRONMENT=development
LOG_LEVEL=INFO
APP_NAME=Salesforce-Stripe Middleware

# ==========================================
# AWS SERVICES
# ==========================================
# These are automatically set by AWS Lambda runtime
AWS_REGION=us-east-1
AWS_LAMBDA_FUNCTION_NAME=salesforce-stripe-middleware-dev-webhook-receiver
AWS_LAMBDA_FUNCTION_VERSION=$LATEST

# SQS Queue (auto-populated by SAM template)
SQS_QUEUE_URL=https://sqs.us-east-1.amazonaws.com/YOUR_ACCOUNT_ID/salesforce-stripe-middleware-dev-stripe-events

# ==========================================
# REDIS (ElastiCache)
# ==========================================
# Option 1: ElastiCache Redis (~$15/month)
REDIS_HOST=salesforce-stripe-redis.abc123.0001.use1.cache.amazonaws.com
REDIS_PORT=6379
REDIS_SSL=true
REDIS_DB=0
REDIS_PASSWORD=  # Leave empty if no password
REDIS_TOKEN_TTL=3600

# Option 2: Skip Redis (use DynamoDB instead - modify code)
# REDIS_HOST=localhost
# REDIS_PORT=6379

# ==========================================
# SECRETS MANAGER REFERENCES
# ==========================================
# Actual secret values are stored in AWS Secrets Manager
# Lambda functions retrieve these at runtime

# Stripe API Key Secret ARN (auto-populated by template)
STRIPE_API_KEY_ARN=arn:aws:secretsmanager:us-east-1:ACCOUNT_ID:secret:salesforce-stripe-middleware-dev-stripe-api-key

# Stripe Webhook Secret ARN (auto-populated by template)
STRIPE_WEBHOOK_SECRET_ARN=arn:aws:secretsmanager:us-east-1:ACCOUNT_ID:secret:salesforce-stripe-middleware-dev-stripe-webhook-secret

# Salesforce Client Secret ARN (auto-populated by template)
SALESFORCE_CLIENT_SECRET_ARN=arn:aws:secretsmanager:us-east-1:ACCOUNT_ID:secret:salesforce-stripe-middleware-dev-salesforce-client-secret

# ==========================================
# ACTUAL SECRET VALUES (stored in Secrets Manager)
# ==========================================
# These are NOT environment variables - they're in Secrets Manager
# Set these during deployment with deploy-lambda.sh script

# Stripe API Key (stored in Secrets Manager)
# Value: sk_test_YOUR_STRIPE_SECRET_KEY

# Stripe Webhook Secret (stored in Secrets Manager)
# Value: whsec_YOUR_WEBHOOK_SIGNING_SECRET

# Salesforce Credentials (stored as JSON in Secrets Manager)
# Value: {
#   "client_id": "YOUR_CONNECTED_APP_CLIENT_ID",
#   "client_secret": "YOUR_CONNECTED_APP_CLIENT_SECRET",
#   "instance_url": "https://login.salesforce.com"
# }

# ==========================================
# CONFIGURATION
# ==========================================
# Stripe
STRIPE_API_VERSION=2024-10-28

# Salesforce
SALESFORCE_API_VERSION=v63.0

# Retry Configuration
MAX_RETRY_ATTEMPTS=5
RETRY_BACKOFF_BASE=2
RETRY_BACKOFF_MAX=32

# Rate Limiting
RATE_LIMIT_WINDOW=60
RATE_LIMIT_MAX_CALLS=100

# ==========================================
# NOTES
# ==========================================
# 1. This file is for reference only
# 2. Actual configuration is in template.yaml
# 3. Secrets are in AWS Secrets Manager
# 4. Lambda automatically has AWS credentials
# 5. Use CloudWatch Logs for debugging
